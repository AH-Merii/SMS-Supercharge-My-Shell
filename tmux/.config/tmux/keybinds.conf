##### Keybindings #####

# Vim-style pane movement
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Split windows keeping cwd
bind '"' split-window -v -c "#{pane_current_path}"
bind %   split-window -h -c "#{pane_current_path}"

# Move between panes with Alt + Arrows
bind -n M-Left  select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up    select-pane -U
bind -n M-Down  select-pane -D

# Switch windows
bind -n S-Left  previous-window
bind -n S-Right next-window
bind -n M-H     previous-window
bind -n M-L     next-window

# Copy-mode (vi)
bind-key -T copy-mode-vi v   send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y   send-keys -X copy-selection-and-cancel

##### Splits
# Alt+v → vertical split (top/bottom) with same starting path as current pane
bind -n M-v split-window -v -c "#{pane_current_path}"
# Alt+s → horizontal split (left/right) with same starting path as current pane 
bind -n M-s split-window -h -c "#{pane_current_path}"

# Quick helper shortcut to open man page
bind m command-prompt -p "man page for:" "display-popup -E -w 80% -h 80% 'man %% | col -bx | bat -l man -p'"
bind M display-popup -E -w 80% -h 80% 'man tmux | col -bx | bat -l man -p'

##### Windows & Sessions
# Alt+n → new window with same starting path as current pane
bind -n M-n new-window -c "#{pane_current_path}"
 
# Alt+N → new session
bind -n M-N new-session

##### Rename (pane/window)
# Alt+r → rename current session
bind -n M-R command-prompt -I "#S" -p "Rename session:" 'rename-session "%%"'
# Alt+R → rename current window (pre-fill with current name)
bind -n M-r command-prompt -I "#W" -p "Rename window:" 'rename-window "%%"'

##### Close (pane/window)
# Alt+c → close pane
bind -n M-c kill-pane
# Alt+C → close window
bind -n M-C kill-window

##### Close (session/server) — with confirmation prompts
# Alt+x → kill current session (prompt)
bind -n M-x confirm-before -p "Kill tmux session? (y/N)" "kill-session"

# Alt+X → kill tmux server (prompt)
bind -n M-X confirm-before -p "Kill tmux server? (y/N)" "kill-server"


# Ctrl + Alt + R → Reload config and plugins with centered popup
bind -n C-M-r display-popup -T "Reload Config" "sh -lc '
  printf \"\033[38;5;80m  Reloading tmux configuration...\033[0m\n\n\";
  tmux source-file ~/.config/tmux/tmux.conf;
  tmux run-shell ~/.config/tmux/plugins/tpm/bin/install_plugins;
  printf \"\n\033[32m Tmux config &   plugins reloaded successfully!\033[0m\n\";
  printf \"\nPress any esc to close...\n\";
'"

